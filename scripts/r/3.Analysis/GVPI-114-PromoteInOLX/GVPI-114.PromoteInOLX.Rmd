---
title: 'AB Test: Promote in OLX'
output:
  pdf_document: default
  html_document:
    theme: spacelab
---

```{r setup, include=FALSE, message=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

**Requested By (PM):** Cl√°udia Rosado  
**Product:** Otomoto, Autovit, Standvirtual (desktop)  
**Feature:** Promote in OLX Button with colour variation (blue / grey)  
**Goal Description / User Behavior to Change:** Measuring users willingness to promote ads in OLX directly in My Account  
**Main Metric to Impact:**  Promote in OLX CTR  
**Metric Goal to Achieve:** none  
**Expected Release Date:**  
**Effective Release Date:**  
**Related JIRA Ticket:** GVPI-114  

### **Conclusions**
In Otomoto.PL, we have statistically relevant results with the blue version winning (3.4% CTR) against the grey version (2.2% CTR). 

In Autovit.RO and Standvirtual.PT, we still need a bigger sample to decide between blue or grey. Nevertheless, the blue version has always a small advantage over the grey version (AUT: 2,7% vs 2,3% STV: 1,9% vs 1,3%).

My advice is to shutdown the test in all countries and consider the blue version the winner in all countries, as it will take a longer time to have results and, in my opinion, we shouldn't annoy our users further more.  

### **Otomoto**
```{r , echo=FALSE, message=FALSE}
library(pander)
library(knitr)
library(kableExtra)

df <- NULL

df <-
  data.frame(
    id = c("9830182098", "9831732375"),
    name = c("Grey Button", "Blue Button"),
    period = c("Dec 17, 2017 - Jan 07, 2018", "Dec 17, 2017 - Jan 07, 2018"),
    PopulationMetric = c("my_ads_active","my_ads_active"),
    PopulationValue = c(22792 , 22418),
    SucessMetric = c("promote_in_olx","promote_in_olx"),
    SucessValue = c(498, 754)
  )

df$ctr <- 
  df$SucessValue / df$PopulationValue

testResults <- 
  power.prop.test(
    n = df$PopulationValue, 
    p1 = df$ctr[1],
    p2 = df$ctr[2],
    sig.level = 0.05,
    alternative = "two.sided"
  )

otomotoData <- df
otomotoTestResults <- testResults

knitr::kable(otomotoData, format = "latex", booktabs = T) %>%
  kable_styling(latex_options = c("striped", "scale_down"))

otomotoTestResults

df <- NULL
testResults <- NULL
neededSample <- NULL
```

### **Autovit**

```{r , echo=FALSE, message=FALSE}
library(pander)
library(knitr)
library(kableExtra)

df <- NULL
df <-
  data.frame(
    id = c("", ""),
    name = c("Grey Button", "Blue Button"),
    period = c("Dec 17, 2017 - Jan 07, 2018", "Dec 17, 2017 - Jan 07, 2018"),
    PopulationMetric = c("my_ads_active","my_ads_active"),
    PopulationValue = c( 2275, 2134),
    SucessMetric = c("promote_in_olx","promote_in_olx"),
    SucessValue = c(53, 57)
  )

df$ctr <- 
  df$SucessValue / df$PopulationValue

testResults <- 
  power.prop.test(
    n = df$PopulationValue, 
    p1 = df$ctr[1],
    p2 = df$ctr[2],
    sig.level = 0.05,
    alternative = "two.sided"
  )

autovitData <- df
autovitTestResults <- testResults

knitr::kable(autovitData, format = "latex", booktabs = T) %>%
  kable_styling(latex_options = c("striped", "scale_down"))

autovitTestResults

df <- NULL
testResults <- NULL
neededSample <- NULL
```

### **Standvirtual**
```{r , echo=FALSE, message=FALSE}
library(pander)
library(knitr)
library(kableExtra)

df <- NULL

df <-
  data.frame(
    id = c("", ""),
    name = c("Grey Button", "Blue Button"),
    period = c("Dec 17, 2017 - Jan 07, 2018", "Dec 17, 2017 - Jan 07, 2018"),
    PopulationMetric = c("my_ads_active","my_ads_active"),
    PopulationValue = c( 2159, 2194),
    SucessMetric = c("promote_in_olx","promote_in_olx"),
    SucessValue = c(27, 42)
  )

df$ctr <- 
  df$SucessValue / df$PopulationValue

testResults <- 
  power.prop.test(
    n = df$PopulationValue, 
    p1 = df$ctr[1],
    p2 = df$ctr[2],
    sig.level = 0.05,
    alternative = "two.sided"
  )

standvirtualData <- df
standvirtualTestResults <- testResults

knitr::kable(standvirtualData, format = "latex", booktabs = T) %>%
  kable_styling(latex_options = c("striped", "scale_down"))

standvirtualTestResults

df <- NULL
testResults <- NULL
neededSample <- NULL
```