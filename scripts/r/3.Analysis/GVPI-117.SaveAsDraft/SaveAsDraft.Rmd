---
title: 'Feature Release: Save as a Draft'
output:
  pdf_document: default
  html_document:
    theme: spacelab
---

```{r setup, include=FALSE, message=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

**Requested By (PM):** Cl√°udia Rosado  
**Product:** Otomoto, Autovit, Standvirtual (desktop)  
**Feature:** Save as Draft (Button in Posting Flow)  
**Goal Description / User Behavior to Change:** "Understand if users are interested in "save ads as a draft" and check if having this option reduce the posting flow conversion rate."  
**Main Metric to Impact:** Posting Flow Convertion Rate (posting_add_click / posting_form)  
**Metric Goal to Achieve:** Don't decrease Posting Flow Convertion Rate  
**Expected Release Date:**  
**Effective Release Date:**  
**Related JIRA Ticket:** GVPI-117  

### **Conclusions**

UPDATED: 17-11-2017  

OTOMOTO: Test already finished with +1.06p.p (+ 1.6%) advantaged for the variant with save draft button.
Results:  
Original - 66.2 %  
Variant with Button - 67.3 %  

AUTOVIT: Test not finished (insufficent number of samples). Until now + 0.04 p.p (0.06%) advantaged for the variant with save draft button.  
Results:  
Original - 70.92 %  
Variant with Button - 70.97 %  

STANDVIRTUAL: Test not finished (insufficent number of samples). Until now + 1.79 p.p (4%) advantaged for the variant with save draft button.  
Results:  
Original - 44.60 %  
Variant with Button - 46.39 %  

---------------------
20-10-2017  
This in not the final reports as it isn't finished. It's not finished because we cannot draw statistically relevant conclusions from the data that we have at current moment (11th/Oct - 24th/Oct). In this particular case, for all the countries (OTO, AUT, STV), we don't have the needed sample size with a statistical power greater than 0.8 (currently: OTO(0.2768531), AUT(0.2167030), STV(0.07786580)). 
The difference between "Original"(A)  and "Variation With Save Draft Button"(B) conversions rates is between -0.881 p.p. (-1.84%) in STV and +0.0141 (2.01%) in OTO.

As the differences between A and B are very small, we need a bigger sample (recommended samples: OTO(65188), AUT(16143), STV(50465)). These bigger samples would take the test to run for more 2 months.
Even then, **I my personal opinion/intuition**, we wouldn't see big differences.

Nevertheless, it's necessary to fix the "save draft" button's tracking before ending the test, as I would like to test another hyphothesis: people are savings drafts, abandoning the posting flow, recovery the ad in their personal account and posting it from there. 

### **Otomoto**
```{r , echo=FALSE, message=FALSE}
library(pander)
library(knitr)
library(kableExtra)

df <- NULL

df <-
  data.frame(
  id = c("9010710728", "9009940388"),
  name = c("Original", "Variant with Button"),
  period = c("Oct 11, 2017 - Nov 14, 2017", "Oct 11, 2017 - Nov 14, 2017"),
  PopulationMetric = c("posting_form","posting_form"),
  PopulationValue = c(44764, 44493),
  SucessMetric = c("posting_add_click","posting_add_click"),
  SucessValue = c(29626, 29921)
  )

df$ctr <- 
  df$SucessValue / df$PopulationValue

testResults <- 
  power.prop.test(
    n = df$PopulationValue, 
    p1 = df$ctr[1],
    p2 = df$ctr[2],
    sig.level = 0.05,
    alternative = "two.sided"
  )

neededSample <- 
  power.prop.test(
    p1 = df$ctr[1],
    p2 = df$ctr[2],
    sig.level = 0.05,
    power = 0.8,
    alternative = "two.sided"
  )$n

otomotoData <- df
otomotoTestResults <- testResults
neededSampleOtomoto <- neededSample

knitr::kable(otomotoData, format = "latex", booktabs = T) %>%
  kable_styling(latex_options = c("striped", "scale_down"))

testResults

df <- NULL
testResults <- NULL
neededSample <- NULL
```

### **Autovit**
```{r , echo=FALSE, message=FALSE}
library(pander)
library(knitr)
library(kableExtra)

df <- NULL

df <-
  data.frame(
  id = c("9024060291", "9010870766"),
  name = c("Original", "Variant with Button"),
  period = c("Oct 11, 2017 - Nov 14, 2017", "Oct 11, 2017 - Nov 14, 2017"),
  PopulationMetric = c("posting_form","posting_form"),
  PopulationValue = c(6735, 6638),
  SucessMetric = c("posting_add_click","posting_add_click"),
  SucessValue = c(4777, 4711)
  )

df$ctr <- 
  df$SucessValue / df$PopulationValue

testResults <- 
  power.prop.test(
    n = df$PopulationValue, 
    p1 = df$ctr[1],
    p2 = df$ctr[2],
    sig.level = 0.05,
    alternative = "two.sided"
  )

neededSample <- 
  power.prop.test(
    p1 = df$ctr[1],
    p2 = df$ctr[2],
    sig.level = 0.05,
    power = 0.8,
    alternative = "two.sided"
  )$n

autovitData <- df
autovitTestResults <- testResults
neededSampleAutovit<- neededSample

knitr::kable(autovitData, format = "latex", booktabs = T) %>%
  kable_styling(latex_options = c("striped", "scale_down"))

testResults

df <- NULL
testResults <- NULL
neededSample <- NULL
```

### **Standvirtual**
```{r , echo=FALSE, message=FALSE}
library(pander)
library(knitr)
library(kableExtra)

df <- NULL

df <-
  data.frame(
  id = c("9031150194", "9016300173"),
  name = c("Original", "Variant with Button"),
  period = c("Oct 11, 2017 - Nov 14, 2017", "Oct 11, 2017 - Nov 14, 2017"),
  PopulationMetric = c("posting_form","posting_form"),
  PopulationValue = c(5231, 5327),
  SucessMetric = c("posting_add_click","posting_add_click"),
  SucessValue = c(2333, 2471)
  )

df$ctr <- 
  df$SucessValue / df$PopulationValue

testResults <- 
  power.prop.test(
    n = df$PopulationValue, 
    p1 = df$ctr[1],
    p2 = df$ctr[2],
    sig.level = 0.05,
    alternative = "two.sided"
  )

neededSample <- 
  power.prop.test(
    p1 = df$ctr[1],
    p2 = df$ctr[2],
    sig.level = 0.05,
    power = 0.8,
    alternative = "two.sided"
  )$n

stvData <- df
stvTestResults <- testResults
neededSampleSTV<- neededSample

knitr::kable(stvData, format = "latex", booktabs = T) %>%
  kable_styling(latex_options = c("striped", "scale_down"))

testResults

df <- NULL
testResults <- NULL
neededSample <- NULL
```